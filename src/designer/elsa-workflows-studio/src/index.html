<!DOCTYPE html>
<html dir="ltr" lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0"/>
    <title>Elsa Dashboard</title>
    <link rel="icon" type="image/png" sizes="32x32" href="/build/assets/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/build/assets/images/favicon-16x16.png">
    <link rel="stylesheet" href="/build/assets/fonts/inter/inter.css">
    <link href="/build/assets/styles/tailwind.css" rel="stylesheet">
    <script src="/build/assets/js/monaco-editor/min/vs/loader.js"></script>
    <script type="module" src="/build/elsa-workflows-studio.esm.js"></script>
    <script nomodule src="/build/elsa-workflows-studio.js"></script>
</head>
<body>

<elsa-studio-root server-url="https://localhost:11000" monaco-lib-path="build/assets/js/monaco-editor/min" culture="en-US"></elsa-studio-root>
<!--<elsa-workflow-definition-editor-screen server-url="https://localhost:11000" monaco-lib-path="build/assets/js/monaco-editor/min"></elsa-workflow-definition-editor-screen>-->
<!--<elsa-workflow-instance-list-screen server-url="https://localhost:11000"></elsa-workflow-instance-list-screen>-->
<!--<elsa-external-events></elsa-external-events>-->
<!--<elsa-studio-root server-url="https://localhost:5001" monaco-lib-path="build/assets/js/monaco-editor/min"></elsa-studio-root>-->
<!--<elsa-studio-root server-url="https://localhost:6080" monaco-lib-path="build/assets/js/monaco-editor/min"></elsa-studio-root>-->
<!--<elsa-studio-root server-url="https://skynet-workflow.azurewebsites.net" monaco-lib-path="build/assets/js/monaco-editor/min"></elsa-studio-root>-->

<script>
    const elsaStudioRoot = document.querySelector('elsa-studio-root');

    // Install custom plugins and icons:
    elsaStudioRoot.addEventListener('initializing', event => {
        const elsa = event.detail;
        const activityIconProvider = elsa.activityIconProvider;
        const eventBus = elsa.eventBus;

        // Replace icon used for 'ReadLine' activity.
        activityIconProvider.register('ReadLine', `<span class="elsa-rounded-lg elsa-inline-flex elsa-p-3 elsa-bg-green-50 elsa-text-green-700 elsa-ring-4 elsa-ring-white">
      <svg class="elsa-h-6 elsa-w-6" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z"/>
        <path d="M4 12v-3a3 3 0 0 1 3 -3h13m-3 -3l3 3l-3 3"/>
        <path d="M20 12v3a3 3 0 0 1 -3 3h-13m3 3l-3-3l3-3"/>
        <path d="M11 11l1 -1v4"/>
      </svg>
    </span>`);
        
        eventBus.on('workflow-instance-bulk-actions-loading', e => {
            e.bulkActions.push({ name: 'Reset', text: 'Reset', handler: () => alert(1) });
        })
    });

    // Intercept outgoing requests and their responses:
    elsaStudioRoot.addEventListener('httpClientCreated', event => {

        // Get access to the axios middleware service and register a sample middleware:
        const {service} = event.detail;

        // Register a sample middleware.
        service.register({
            onRequest(request) {
                console.log('onRequest');
                return request;
            },

            onResponse(response) {
                console.log('onResponse');
                return response;
            }
        });
    })
</script>

</body>
</html>
